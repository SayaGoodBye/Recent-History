(()=>{"use strict";var t,e={349:(t,e,a)=>{var n=a(602),s=a(794),i=a.n(s);const r={storage:{stores:[{store:"default",props:{autoIncrement:!1,keyPath:["key"]},indexes:[{indexName:"key",keyPath:"key"}]}],version:1}};class o{constructor(t,e){this.dbName=t,this.tableName=e,this.version=i().get(r,[t,"version"],1),this._db=null}async db(){if(this._db)return this._db;const t=i().get(r,[this.dbName,"stores"],[]);return this._db=await(0,n.P2)(this.dbName,this.version,{upgrade(e){for(let{store:a,props:n,indexes:s}of t)if(!1===e.objectStoreNames.contains(a)){let t=e.createObjectStore(a,n);for(let{indexName:e,keyPath:a}of s)t.createIndex(e,a)}}}),this._db}async add(t,e){return(await this.db()).add(this.tableName,t,e)}async get(t){return(await this.db()).get(this.tableName,t)}async getFromIndex(t,e){return(await this.db()).getFromIndex(this.tableName,t,e)}async getKeyFromIndex(t,e){return(await this.db()).getKeyFromIndex(this.tableName,t,e)}async getAllKeysFromIndex(t,e,a){return(await this.db()).getAllKeysFromIndex(this.tableName,t,e,a)}async getAllFromIndex(t,e,a){return(await this.db()).getAllFromIndex(this.tableName,t,e,a)}async getAll(){return(await this.db()).getAll(this.tableName)}async set(t,e){return(await this.db()).put(this.tableName,t,e)}async setIfNotExists(t,e,a=!0){return(await this.keys()).includes(t)?null:!0===a?(await this.db()).put(this.tableName,await e(),t):(await this.db()).put(this.tableName,e(),t)}async delete(t){return(await this.db()).delete(this.tableName,t)}async deleteByIndex(t,e){await this.eachByIndex(t,e,(t=>t.delete()))}async eachByIndex(t,e,a){const n=await this.db(),s=await n.transaction(this.tableName,"readwrite");let i=await s.store.index(t).openCursor(e);const r=[];for(;i;)r.push(a(i)),i=await i.continue();await Promise.all(r),await s.done}async findFirstByIndex(t,e,a){const n=await this.db(),s=await n.transaction(this.tableName,"readwrite");let i=await s.store.index(t).openCursor(e);for(;i;){if(a(i))return await s.done,i.value;i=await i.continue()}return await s.done,null}async findByIndex(t,e,a){const n=await this.db(),s=await n.transaction(this.tableName,"readwrite");let i=await s.store.index(t).openCursor(e);const r=[];for(;i;)a&&!a(i)||r.push(i.value),i=await i.continue();return await s.done,r}async upperBound(t,e){return IDBKeyRange.upperBound(t,e)}async clear(){return(await this.db()).clear(this.tableName)}async keys(){return(await this.db()).getAllKeys(this.tableName)}async close(){(await this.db()).close(),this._db=null}async once(t,...e){const a=await t(...e);return await this.close(),a}async onceGet(t){const e=await this.get(t);return await this.close(),e}async onceSet(t,e){const a=await this.set(t,e);return await this.close(),a}async onceDelete(t){const e=await this.delete(t);return await this.close(),e}}class l{constructor(){this.index=new o("storage","default")}set(t,e){return this.index.set({key:t,data:e})}async get(t,e){const a=await this.index.getFromIndex("key",t);return i().get(a,["data"],e)}async del(t){return await this.index.deleteByIndex("key",t)}async getAll(){return(await this.index.getAll()).reduce(((t,e)=>({...t,[e.key]:e.data})),{})}}const c=async(t,e=null)=>await(new l).get(t,e),d=async(t,e)=>await(new l).set(t,e),h=(t,e)=>chrome.i18n.getMessage(t,e);var u=a(350),m=a.n(u),v=a(692),w=a.n(v);function y(){const t=w()("#rhsshowurl").val(),e=w()("#rhsshowsep").val(),a=w()("#rhsshowext").val();"yes"===t?w()("#rhitemstyle-url").css("display","inline"):w()("#rhitemstyle-url").css("display","none"),"yes"===e?w()("#rhitemstyle").css("border-bottom","1px solid #ccc"):w()("#rhitemstyle").css("border-bottom","0 none"),"yes"===a?w()("#rhitemstyle-info").css("display","inline"):w()("#rhitemstyle-info").css("display","none"),"yes"===a&&"yes"===t?w()("#rhitemstyle-sep").css("display","inline"):w()("#rhitemstyle-sep").css("display","none")}async function p(t,e,a,n){const s=await c(n),i=w()(`#${t}`),r=w()(`#${t}-range`);i.css("text-align","right"),i.on("blur",(function(){const t=1*i.val();t>=e&&t<=a?r.val(t):(i.val(s),alert(e+"-"+a))})),r.on("input",(function(){i.val(w()(this).val())})),r.on("change",(function(){i.val(w()(this).val())})),i.on("keydown",(function(t){40===t.keyCode&&1*i.val()>e&&i.val(1*i.val()-1),38===t.keyCode&&1*i.val()<a&&i.val(1*i.val()+1)}))}function f(){const t=w()("#flist-add-i"),e=t.val().replace(" ","");let a="test";if(e.length>0&&(w()("#flist-table tr td:first-child").each((function(){w()(this).text()===e&&(a=w()(this).text())})),"test"===a)){const a="link-"+Math.floor(1e18*Math.random()+1e17),n=document.createElement("tr");n.classList.add("op-item"),n.innerHTML=`\n        <td>\n          <div title="${e}">${e}</div>\n        </td>\n        <td style="width:20px;">\n          <a href="#" id="${a}">\n            <img alt="Restore" src="images/remove.png">\n          </a>\n        </td>\n      `,w()("#flist-table").append(n),t.val(""),w()(`#${a}`).on("click",(function(){n.remove()}))}}window.addEventListener("DOMContentLoaded",(async()=>{const t=function(){const t=[];let e;const a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let n=0;n<a.length;n++)e=a[n].split("="),t.push(e[0]),t[e[0]]=e[1];return t}();void 0===t.p?(w()("#tab-options-content").css("display","block"),w()("#tab-options").addClass("tab-current")):(w()("#tab-"+t.p+"-content").css("display","block"),w()("#tab-"+t.p).addClass("tab-current")),w()(".tab").on("click",(function(){w()(".tab-content").css("display","none"),w()(".tab").removeClass("tab-current"),w()("#"+w()(this).attr("id")+"-content").css("display","block"),w()(this).addClass("tab-current")})),w()("#save").val(h("saveOptions")),w()(".help-tip").each((function(){w()(this).attr("title",h(w()(this).attr("id")))})),await async function(){const t=await c("rh-itemsno");w()("#rhitemsno").val(t),w()("#rhitemsno-range").val(t);const e=await c("rct-itemsno");w()("#rctitemsno").val(e),w()("#rctitemsno-range").val(e);const a=await c("mv-itemsno");w()("#mvitemsno").val(a),w()("#mvitemsno-range").val(a);const n=await c("rb-itemsno");w()("#rbitemsno").val(n),w()("#rbitemsno-range").val(n);const s=(await c("rh-list-order")).split(",");for(let t in s){const e=document.createElement("li");e.id=s[t],"rh-order"===s[t]?e.innerHTML=h("recentHistory"):"rct-order"===s[t]?e.innerHTML=h("recentlyClosedTabs"):"mv-order"===s[t]?e.innerHTML=h("mostVisited"):"rb-order"===s[t]&&(e.innerHTML=h("recentBookmarks")),w()("#rhlistorder").append(e)}const i=await(async()=>await(new l).getAll())();new(m())(document.getElementById("rhlistorder"),{animation:250,onStart:function(t){w()("#rhlistorder li").each((function(e){e!==t&&w()(e).css("opacity",.4)}))},onComplete:function(){w()("#rhlistorder li").setStyle("opacity",1)}}),w()(`#rhhistorypage option[value="${i["rh-historypage"]}"]`).attr("selected","selected"),w()(`#rhdate option[value="${i["rh-date"]}"]`).attr("selected","selected"),w()(`#rhtime option[value="${i["rh-timeformat"]}"]`).attr("selected","selected"),w()(`#rhsearch option[value="${i["rh-search"]}"]`).attr("selected","selected"),w()(`#rhshare option[value="${i["rh-share"]}"]`).attr("selected","selected"),w()(`#rhsshowurl option[value="${i["rhs-showurl"]}"]`).attr("selected","selected"),w()(`#rhsshowsep option[value="${i["rhs-showsep"]}"]`).attr("selected","selected"),w()(`#rhsshowext option[value="${i["rhs-showext"]}"]`).attr("selected","selected"),w()(`#rhsshowbg option[value="${i["rhs-showbg"]}"]`).attr("selected","selected"),y(),w()("#rhsshowurl").on("change",(function(){y()})),w()("#rhsshowsep").on("change",(function(){y()})),w()("#rhsshowext").on("change",(function(){y()})),w()("#rhwidth").val(parseInt(i["rh-width"])),w()("#rhwidth-range").val(parseInt(i["rh-width"])),await async function(){let t=await c("mv-blocklist");if(t.length>0&&"false"!==t&&(t=t.split("|"),t.length>0))for(let e=0;e<t.length;e++)if(void 0!==t[e]&&""!==t[e]){const a="link-"+Math.floor(1e18*Math.random()+1e17),n=document.createElement("tr");n.classList.add("op-item"),n.innerHTML=`\n            <td>\n              <div title="${t[e]}">${t[e]}</div>\n            </td>\n            <td style="width:20px;">\n              <a href="#" id="${a}">\n              <img alt="Restore" src="images/remove.png"></a>\n            </td>\n          `,w()("#mvlist-table").append(n),w()(`#${a}`).on("click",(function(){w()(n).remove()}))}}(),await async function(){let t=await c("rh-filtered");if(t.length>0&&"false"!==t&&(t=t.split("|"),t.length>0))for(let e=0;e<t.length;e++)if(void 0!==t[e]&&""!==t[e]){const a="link-"+Math.floor(1e18*Math.random()+1e17),n=document.createElement("tr");n.classList.add("op-item"),n.innerHTML=`\n            <td>\n              <div title="${t[e]}">${t[e]}</div>\n            </td>\n            <td style="width:20px;">\n              <a href="#" id="${a}">\n                <img alt="Restore" src="images/remove.png">\n              </a>\n            </td>\n          `,w()("#flist-table").append(n),w()(`#${a}`).on("click",(function(){n.remove()}))}}(),w()(`#rhclick option[value="${i["rh-click"]}"]`).attr("selected","selected")}(),w()("#save").on("click",(function(){!async function(){const t={},e=w()("#rhlistorder li"),a=w()("#mvlist tr td:first-child"),n=w()("#flist tr td:first-child");let s="",i="";if(w()("#save").val(h("saving")),a.length>0)for(let t=0;t<a.length;t++)s+=w()(a[t]).text()+"|";else s="false";if(n.length>0)for(let t=0;t<n.length;t++)i+=w()(n[t]).text()+"|";else i="false";t["rh-itemsno"]=w()("#rhitemsno").val(),t["rct-itemsno"]=w()("#rctitemsno").val(),t["rb-itemsno"]=w()("#rbitemsno").val(),t["mv-itemsno"]=w()("#mvitemsno").val(),t["rh-list-order"]=w()(e[0]).attr("id")+","+w()(e[1]).attr("id")+","+w()(e[2]).attr("id")+","+w()(e[3]).attr("id"),t["rh-historypage"]=w()("#rhhistorypage").val(),t["rh-date"]=w()("#rhdate").val(),t["rh-timeformat"]=w()("#rhtime").val(),t["rh-search"]=w()("#rhsearch").val(),t["rhs-showurl"]=w()("#rhsshowurl").val(),t["rhs-showsep"]=w()("#rhsshowsep").val(),t["rhs-showext"]=w()("#rhsshowext").val(),t["rh-width"]=w()("#rhwidth").val()+"px",t["mv-blocklist"]=s,t["rh-filtered"]=i,t["rh-click"]=w()("#rhclick").val();for(let e in t)await d(e,t[e]);setTimeout((()=>{w()("#save").val(h("saved"))}),1500),setTimeout((()=>{w()("#save").val(h("saveOptions"))}),3e3)}()})),await p("rhitemsno",0,30,"rh-itemsno"),await p("rctitemsno",0,30,"rct-itemsno"),await p("mvitemsno",0,30,"mv-itemsno"),await p("rbitemsno",0,30,"rb-itemsno"),await p("rhwidth",225,800,"rh-width"),w()("#flist-add-b").on("click",(function(){f()})),w()("#flist-add-i").on("keyup",(function(t){13===t.keyCode&&f()})),w()("#advance-options").on("submit",(function(){return!1})),w()(".lang").each((function(){this.innerHTML=h(w()(this).attr("data-lang-string"))})),w()("#app-version").text("26.1.31")}))}},a={};function n(t){var s=a[t];if(void 0!==s)return s.exports;var i=a[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}n.m=e,t=[],n.O=(e,a,s,i)=>{if(!a){var r=1/0;for(d=0;d<t.length;d++){for(var[a,s,i]=t[d],o=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((t=>n.O[t](a[l])))?a.splice(l--,1):(o=!1,i<r&&(r=i));if(o){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,s,i]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.j=575,(()=>{var t={575:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var s,i,[r,o,l]=a,c=0;if(r.some((e=>0!==t[e]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var d=l(n)}for(e&&e(a);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(d)},a=self.webpackChunkrecenthistory=self.webpackChunkrecenthistory||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var s=n.O(void 0,[96],(()=>n(349)));s=n.O(s)})();